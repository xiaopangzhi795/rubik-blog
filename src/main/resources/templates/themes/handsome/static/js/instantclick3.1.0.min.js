/* InstantClick 3.1.0 | (C) 2014-2016 Alexandre Dieulot | http://instantclick.io/license */

var instantClick,InstantClick=instantClick=function(g,e,z){function v(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function r(a){for(;a&&"A"!=a.nodeName;)a=a.parentNode;return a}function A(a){var b=e.protocol+"//"+e.host;if(!(b=a.target||a.hasAttribute("download")||0!=a.href.indexOf(b+"/")||-1<a.href.indexOf("#")&&v(a.href)==n))a:{do{if(!a.hasAttribute)break;if(a.hasAttribute("data-instant"))break;if(a.hasAttribute("data-no-instant")){b=!0;break a}}while(a=a.parentNode);b=!1}return b?!1:!0}
    function f(a){for(var b=Array.prototype.slice.call(arguments,1),d=!1,e=0;e<B[a].length;e++)if("receive"==a){var c=B[a][e].apply(window,b);c&&("body"in c&&(b[1]=c.body),"title"in c&&(b[2]=c.title),d=c)}else B[a][e].apply(window,b);return d}function K(a,b,d,c){g.documentElement.replaceChild(b,g.body);U();V();if(d){d!=e.href&&history.pushState(null,null,d);b=d.indexOf("#");b=-1<b&&g.getElementById(d.substr(b+1));var k=0;if(b)for(;b.offsetParent;)k+=b.offsetTop,b=b.offsetParent;"requestAnimationFrame"in
    window?requestAnimationFrame(function(){scrollTo(0,k)}):scrollTo(0,k);n=v(d)}else scrollTo(0,c);g.title=W&&g.title==a?a+String.fromCharCode(160):a;d?(L(!1),f("change",!1)):(l.abort(),h=p=!1,f("restore"))}function U(){for(var a=0;a<w.length;a++)clearTimeout(w[a]);w=[]}function V(){for(var a=0;a<u.length;a++)"object"==typeof u[a]&&"abort"in u[a]&&u[a].abort();u=[]}function M(a){(a=r(a.target))&&A(a)&&C(a.href)}function N(a){if(!(O>+new Date-500||100>+new Date-F)){var b=r(a.target);b&&b!=r(a.relatedTarget)&&
    A(b)&&(f("hover",b.href),b.addEventListener("mouseout",X),h||(P=b.href,m=Q(C,R)))}}function Y(a){O=+new Date;(a=r(a.target))&&A(a)&&(G?a.removeEventListener("mousedown",M):a.removeEventListener("mouseover",N),C(a.href))}function Z(){g.body.addEventListener("click",S)}function S(a){g.body.removeEventListener("click",S);if(!a.defaultPrevented){var b=r(a.target);!b||!A(b)||1<a.which||a.metaKey||a.ctrlKey||(a.preventDefault(),T(b.href))}}function X(a){r(a.target)!=r(a.relatedTarget)&&(m?(clearTimeout(m),
        m=!1):p&&!h&&(l.abort(),h=p=!1))}function aa(){if(2==l.readyState){var a=l.getResponseHeader("Content-Type");a&&/^text\/html/i.test(a)||(D=!0)}if(!(4>l.readyState))if(0==l.status)$gotANetworkError=!0,h&&(f("exit",c,"network error"),e.href=c);else if(D)h&&(f("exit",c,"non-html content-type"),e.href=c);else{a=g.implementation.createHTMLDocument("");a.documentElement.innerHTML=l.responseText.replace(/<noscript[\s\S]+?<\/noscript>/gi,"");x=a.title;t=a.body;var b=f("receive",c,t,x);b&&("body"in b&&(t=
        b.body),"title"in b&&(x=b.title));b=v(c);k[b]={body:t,title:x,scrollPosition:b in k?k[b].scrollPosition:0};a=a.head.children;b=0;for(var d,m=0;m<a.length;m++)if(d=a[m],d.hasAttribute("data-instant-track")){d=d.getAttribute("href")||d.getAttribute("src")||d.innerHTML;for(var n=0;n<E.length;n++)E[n]==d&&b++}b!=E.length&&(H=!0);h&&(h=!1,T(c))}}function ba(){var a=v(e.href);a!=n&&(h&&(h=p=!1,l.abort()),a in k?(k[n].scrollPosition=pageYOffset,n=a,K(k[a].title,k[a].body,!1,k[a].scrollPosition)):(f("exit",
        e.href,"not in history"),a==e.href?e.href=e.href:e.reload()))}function L(a){g.body.addEventListener("touchstart",Y,!0);G?g.body.addEventListener("mousedown",M,!0):g.body.addEventListener("mouseover",N,!0);g.body.addEventListener("click",Z,!0);if(!a){var b=g.body.getElementsByTagName("script");a=[];var d;for(d=0;d<b.length;d++)a.push(b[d]);for(d=0;d<a.length;d++)if((b=a[d])&&!b.hasAttribute("data-no-instant")){var c=g.createElement("script");b.src&&(c.src=b.src);b.innerHTML&&(c.innerHTML=b.innerHTML);
        var e=b.parentNode;var f=b.nextSibling;e.removeChild(b);e.insertBefore(c,f)}}}function C(a){m&&(clearTimeout(m),m=!1);a||(a=P);if(!p||a!=c&&!h)p=!0,h=!1,c=a,H=$gotANetworkError=D=t=!1,f("preload"),l.open("GET",a),l.timeout=9E4,l.send()}function T(a){F=+new Date;m||!p?m&&c&&c!=a?(f("exit",a,"click occured while preloading planned"),e.href=a):(C(a),f("wait"),h=!0):h?(f("exit",a,"clicked on a link while waiting for another page to display"),e.href=a):D?(f("exit",c,"non-html content-type"),e.href=c):
        $gotANetworkError?(f("exit",c,"network error"),e.href=c):H?(f("exit",c,"different assets"),e.href=c):t?(k[n].scrollPosition=pageYOffset,h=p=!1,K(x,t,c)):(f("wait"),h=!0)}function Q(){var a=window.setTimeout.apply(window,arguments);w.push(a);return a}var W=-1<z.indexOf(" CriOS/"),n,P,m,O,I,k={},l,c=!1,x=!1,D,H,t=!1,F=0,p=!1,h=!1,E=[],G,R=65,B={hover:[],preload:[],receive:[],wait:[],change:[],restore:[],exit:[]},w=[],u=[],y=!1;if("pushState"in history&&"file:"!=e.protocol){y=!0;var q=z.indexOf("Android ");
        if(-1<q&&(q=parseFloat(z.substr(q+8)),4.4>q&&(y=!1,4<=q))){q=[/ Chrome\//,/ UCBrowser\//,/ Firefox\//];for(var J=0;J<q.length;J++)if(q[J].test(z)){y=!0;break}}}return{supported:y,init:function(a){if(!y)f("change",!0);else if(!I){I=!0;"mousedown"==a?G=!0:"number"==typeof a&&(R=a);n=v(e.href);k[n]={body:g.body,title:g.title,scrollPosition:pageYOffset};a=g.head.children;for(var b,c=0;c<a.length;c++)b=a[c],b.hasAttribute("data-instant-track")&&(b=b.getAttribute("href")||b.getAttribute("src")||b.innerHTML,
        E.push(b));l=new XMLHttpRequest;l.addEventListener("readystatechange",aa);L(!0);f("change",!0);addEventListener("popstate",ba)}},on:function(a,b){B[a].push(b);I&&"change"==a&&b(!F)},setTimeout:Q,setInterval:function(){var a=window.setInterval.apply(window,arguments);w.push(a);return a},xhr:function(a){a||(a=new XMLHttpRequest);u.push(a);return a}}}(document,location,navigator.userAgent);